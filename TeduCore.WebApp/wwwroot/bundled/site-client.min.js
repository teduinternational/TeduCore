var tedu={configs:{pageSize:10,pageIndex:1},notify:function(t,e){$.notify(t,{clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,position:"top right",elementPosition:"top right",globalPosition:"top right",style:"bootstrap",className:e,showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:2})},confirm:function(t,e){bootbox.confirm({size:"small",message:t,buttons:{confirm:{label:"Đồng ý",className:"btn-success"},cancel:{label:"Huỷ",className:"btn-danger"}},callback:function(t){t===!0&&e()}})},unflattern:function(t){for(var e={},n=[],a=0;a<t.length;a+=1){var o=t[a];o.children=[],e[o.Id]=a,null!==o.ParentId?t[e[o.ParentId]].children.push(o):n.push(o)}return n},unflattern1:function(t){for(var e={},n=[],a=0;a<t.length;a+=1){var o=t[a];o.children=[],e[o.id]=a,null!==o.parentId?t[e[o.parentId]].children.push(o):n.push(o)}return n},dateFormatJson:function(t){if(null==t||""===t)return"";var e=new Date(t),n=e.getMonth()+1,a=e.getDate(),o=e.getFullYear(),i=e.getHours(),r=e.getMinutes();return n<10&&(n="0"+n),a<10&&(a="0"+a),i<10&&(i="0"+i),r<10&&(r="0"+r),a+"/"+n+"/"+o},dateTimeFormatJson:function(t){if(null===t||""===t)return"";var e=new Date(t),n=e.getMonth()+1,a=e.getDate(),o=e.getFullYear(),i=e.getHours(),r=e.getMinutes(),d=e.getSeconds();return n<10&&(n="0"+n),a<10&&(a="0"+a),i<10&&(i="0"+i),r<10&&(r="0"+r),d<10&&(d="0"+d),a+"/"+n+"/"+o+" "+i+":"+r+":"+d},startLoading:function(){$(".dv-loading").length>0&&$(".dv-loading").removeClass("hide")},stopLoading:function(){$(".dv-loading").length>0&&$(".dv-loading").addClass("hide")},getStatus:function(t){return 1===t?'<span class="badge bg-green">Kích hoạt</span>':'<span class="badge bg-red">Khoá</span>'},formatNumber:function(t,e){if(!isFinite(t))return t.toString();var n=t.toFixed(e).split(".");return n[0]=n[0].replace(/\d(?=(\d{3})+$)/g,"$&,"),n.join(".")},toCamel:function(t){var e,n,a,o;if(t instanceof Array){e=[];for(n in t)o=t[n],e.push(o)}else{e={};for(n in t)t.hasOwnProperty(n)&&(a=(n.charAt(0).toLowerCase()+n.slice(1)||n).toString(),o=t[n],e[a]=o)}return e}},blogController=function(){function t(){$("#frmMaintainance").validate({errorClass:"red",ignore:[],lang:"vi",rules:{txtNameM:{required:!0}}}),$("#txt-search-keyword").keypress(function(t){13===t.which&&(t.preventDefault(),a())}),$("#btn-search").on("click",function(){a()}),$("#fileInputImage").on("change",function(){for(var t=$(this).get(0),e=t.files,n=new FormData,a=0;a<e.length;a++)n.append(e[a].name,e[a]);$.ajax({type:"POST",url:"/Admin/Upload/UploadImage",contentType:!1,processData:!1,data:n,success:function(t){$("#txtImageM").val(t),tedu.notify("Đã tải ảnh lên thành công!","success")},error:function(){tedu.notify("There was error uploading files!","error")}})}),$("#btnSelectImg").on("click",function(){$("#fileInputImage").click()}),$("#ddl-show-page").on("change",function(){tedu.configs.pageSize=$(this).val(),tedu.configs.pageIndex=1,a(!0)}),$("#btn-create").on("click",function(){e(),$("#modal-add-edit").modal("show")}),$("body").on("click",".btn-edit",function(t){t.preventDefault();var e=$(this).data("id");$.ajax({type:"GET",url:"/Admin/Blog/GetById",data:{id:e},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(t){var e=t;$("#hidIdM").val(e.Id),$("#txtNameM").val(e.Name),$("#txtDescM").val(e.Description),$("#txtImageM").val(e.Image),$("#txtTagM").val(e.Tags),$("#txtMetakeywordM").val(e.SeoKeywords),$("#txtMetaDescriptionM").val(e.SeoDescription),$("#txtSeoPageTitleM").val(e.SeoPageTitle),$("#txtSeoAliasM").val(e.SeoAlias),CKEDITOR.instances.txtContentM.setData(e.Content),$("#ckStatusM").prop("checked",1===e.Status),$("#ckHotM").prop("checked",e.HotFlag),$("#ckShowHomeM").prop("checked",e.HomeFlag),$("#modal-add-edit").modal("show"),tedu.stopLoading()},error:function(){tedu.notify("Có lỗi xảy ra","error"),tedu.stopLoading()}})}),$("#btnSaveM").on("click",function(t){if($("#frmMaintainance").valid()){t.preventDefault();var n=$("#hidIdM").val(),o=$("#txtNameM").val(),i=$("#txtDescM").val(),r=$("#txtImageM").val(),d=$("#txtTagM").val(),c=$("#txtMetakeywordM").val(),l=$("#txtMetaDescriptionM").val(),s=$("#txtSeoPageTitleM").val(),u=$("#txtSeoAliasM").val(),p=CKEDITOR.instances.txtContentM.getData(),f=$("#ckStatusM").prop("checked")===!0?1:0,g=$("#ckHotM").prop("checked"),m=$("#ckShowHomeM").prop("checked");return $.ajax({type:"POST",url:"/Admin/Blog/SaveEntity",data:{Id:n,Name:o,Image:r,Description:i,Content:p,HomeFlag:m,HotFlag:g,Tags:d,Status:f,SeoPageTitle:s,SeoAlias:u,SeoKeywords:c,SeoDescription:l},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Cập nhật sản phẩm thành công","success"),$("#modal-add-edit").modal("hide"),e(),tedu.stopLoading(),a(!0)},error:function(){tedu.notify("Cập nhật sản phẩm có lỗi xảy ra","error"),tedu.stopLoading()}}),!1}return!1}),$("body").on("click",".btn-delete",function(t){t.preventDefault();var e=$(this).data("id");tedu.confirm("Bạn có chắc chắn muốn xoá?",function(){$.ajax({type:"POST",url:"/Admin/Blog/Delete",data:{id:e},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Xoá thành công","success"),tedu.stopLoading(),a()},error:function(){tedu.notify("Xoá không thành công","error"),tedu.stopLoading()}})})})}function e(){$("#hidIdM").val(0),$("#txtNameM").val(""),$("#txtDescM").val(""),$("#txtImageM").val(""),$("#txtTagM").val(""),$("#txtMetakeywordM").val(""),$("#txtMetaDescriptionM").val(""),$("#txtSeoPageTitleM").val(""),$("#txtSeoAliasM").val(""),CKEDITOR.instances.txtContentM.setData(""),$("#ckStatusM").prop("checked",!0),$("#ckHotM").prop("checked",!1),$("#ckShowHomeM").prop("checked",!1)}function n(){var t={filebrowserImageUploadUrl:"/Admin/Upload/UploadImageForCKEditor?type=Images"};CKEDITOR.replace("txtContentM",t),$.fn.modal.Constructor.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||$(t.target).closest(".cke_dialog, .cke").length||this.$element.trigger("focus")},this))}}function a(t){$.ajax({type:"GET",url:"/admin/blog/GetAllPaging",data:{keyword:$("#txt-search-keyword").val(),page:tedu.configs.pageIndex,pageSize:tedu.configs.pageSize},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(e){var n=$("#table-template").html(),i="";e.RowCount>0?($.each(e.Results,function(t,e){i+=Mustache.render(n,{Name:e.Name,Id:e.Id,Image:void 0==e.Image?'<img src="/admin-side/images/user.png" width=25 />':'<img src="'+e.Image+'" width=25 />',DateCreated:tedu.dateTimeFormatJson(e.DateCreated),Status:tedu.getStatus(e.Status)})}),$("#lbl-total-records").text(e.RowCount),void 0!=i&&$("#tbl-content").html(i),o(e.RowCount,function(){a()},t)):$("#tbl-content").html(""),tedu.stopLoading()},error:function(t){console.log(t)}})}function o(t,e,n){var a=Math.ceil(t/tedu.configs.pageSize);0!==$("#paginationUL a").length&&n!==!0||($("#paginationUL").empty(),$("#paginationUL").removeData("twbs-pagination"),$("#paginationUL").unbind("page")),$("#paginationUL").twbsPagination({totalPages:a,visiblePages:7,first:"Đầu",prev:"Trước",next:"Tiếp",last:"Cuối",onPageClick:function(t,n){tedu.configs.pageIndex=n,setTimeout(e(),200)}})}this.initialize=function(){a(),t(),n()}},BillController=function(){function t(){var t=0;$("#tbl-bill-details tr").each(function(e,n){var a=parseFloat($(n).find(".hidTotal").first().val());t+=a}),$("#lblTotalAmount").text(tedu.formatNumber(t,0))}function e(){$("#txtFromDate, #txtToDate").datepicker({autoclose:!0,format:"dd/mm/yyyy"}),$("#frmMaintainance").validate({errorClass:"red",ignore:[],lang:"vi",rules:{txtCustomerName:{required:!0},txtCustomerAddress:{required:!0},txtCustomerMobile:{required:!0},txtCustomerMessage:{required:!0},ddlBillStatus:{required:!0}}}),$("#txt-search-keyword").keypress(function(t){13===t.which&&(t.preventDefault(),d())}),$("#btn-search").on("click",function(){d()}),$("#btn-create").on("click",function(){r(),$("#modal-detail").modal("show")}),$("#ddl-show-page").on("change",function(){tedu.configs.pageSize=$(this).val(),tedu.configs.pageIndex=1,d(!0)}),$("body").on("change",".ddlProductId",function(){var e=$(this);p(function(){var n=parseInt($(e).val()),a=$(e).closest("tr").find(".lblTotal").first(),o=$(e).closest("tr").find(".hidTotal").first(),i=$(e).closest("tr").find(".txtQuantity").first().val();if(isNaN(i))return a.text("0"),!1;var r=$.grep(u.products,function(t){return t.Id===n});if(r.length>0){var d=r[0].Price,c=d*i;a.text(tedu.formatNumber(c,0)),o.val(c),t()}else $("#lblTotalAmount").text("0"),o.val("0"),a.text("0"),tedu.notify("Mã sản phẩm không tồn tại","error");return!1},1e3)}),$("body").on("keydown",".txtQuantity",function(){var e=$(this);p(function(){var n=parseInt($(e).val()),a=$(e).closest("tr").find(".lblTotal").first(),o=$(e).closest("tr").find(".hidTotal").first();if(isNaN(n))return a.text("0"),!1;var i=parseInt($(e).closest("tr").find(".ddlProductId").first().val()),r=$.grep(u.products,function(t){return t.Id===i});if(r.length>0){var d=r[0].Price,c=d*n;a.text(tedu.formatNumber(c,0)),o.val(c),t()}else $("#lblTotalAmount").text("0"),o.val("0"),a.text("0"),tedu.notify("Mã sản phẩm không tồn tại","error");return!1},1e3)}),$("body").on("click",".btn-view",function(t){t.preventDefault();var e=$(this).data("id");$.ajax({type:"GET",url:"/Admin/Bill/GetById",data:{id:e},beforeSend:function(){tedu.startLoading()},success:function(t){var e=t;$("#hidId").val(e.Id),$("#txtCustomerName").val(e.CustomerName),$("#txtCustomerAddress").val(e.CustomerAddress),$("#txtCustomerMobile").val(e.CustomerMobile),$("#txtCustomerMessage").val(e.CustomerMessage),$("#ddlPaymentMethod").val(e.PaymentMethod),$("#ddlCustomerId").val(e.CustomerId),$("#ddlBillStatus").val(e.BillStatus),$("#txtCustomerFacebook").val(e.CustomerFacebook),$("#txtShippingFee").val(e.ShippingFee);var n=e.BillDetails;if(null!==e.BillDetails&&e.BillDetails.length>0){var a="",o=$("#template-table-bill-details").html(),r=0;$.each(n,function(t,e){var n=e.Quantity*e.Product.Price,d=i(e.ProductId,e.Price);a+=Mustache.render(o,{Id:e.Id,Products:d,Price:e.Price,Quantity:e.Quantity,Total:tedu.formatNumber(n,0),TotalNumber:n}),r+=n}),$("#lblTotalAmount").text(tedu.formatNumber(r,0)),$("#tbl-bill-details").html(a)}$("#modal-detail").modal("show"),tedu.stopLoading()},error:function(){tedu.notify("Có lỗi xảy ra","error"),tedu.stopLoading()}})}),$("#btnSave").on("click",function(t){if($("#frmMaintainance").valid()){t.preventDefault();var e=$("#hidId").val(),n=$("#txtCustomerName").val(),a=$("#txtCustomerAddress").val(),o=$("#ddlCustomerId").val(),i=$("#txtCustomerMobile").val(),c=$("#txtCustomerMessage").val(),l=$("#txtCustomerFacebook").val(),s=$("#txtShippingFee").val(),u=$("#ddlPaymentMethod").val(),p=$("#ddlBillStatus").val(),f=[];return $.each($("#tbl-bill-details tr"),function(t,n){f.push({Id:$(n).data("id"),ProductId:$(n).find("select.ddlProductId").first().val(),Quantity:$(n).find("input.txtQuantity").first().val(),BillId:e})}),console.log(f),$.ajax({type:"POST",url:"/Admin/Bill/SaveEntity",data:{Id:e,BillStatus:p,CustomerAddress:a,CustomerId:o,CustomerMessage:c,CustomerMobile:i,CustomerName:n,CustomerFacebook:l,ShippingFee:s,PaymentMethod:u,Status:1,BillDetails:f},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Cập nhật thành công","success"),$("#modal-detail").modal("hide"),r(),tedu.stopLoading(),d(!0)},error:function(){tedu.notify("Cập nhật có lỗi xảy ra","error"),tedu.stopLoading()}}),!1}return!1}),$("#btnConfirm").on("click",function(t){t.preventDefault();var e=$("#hidId").val();return $.ajax({type:"POST",url:"/Admin/Bill/ConfirmBill",data:{billId:e},beforeSend:function(){tedu.startLoading()},success:function(t){tedu.notify(t,"success"),$("#modal-detail").modal("hide"),r(),tedu.stopLoading(),d(!0)},error:function(t){tedu.notify(t.responseText,"error"),tedu.stopLoading()}}),!1}),$("#btnCancel").on("click",function(t){t.preventDefault();var e=$("#hidId").val();return $.ajax({type:"POST",url:"/Admin/Bill/CancelBill",data:{billId:e},beforeSend:function(){tedu.startLoading()},success:function(t){tedu.notify(t,"success"),$("#modal-detail").modal("hide"),r(),tedu.stopLoading(),d(!0)},error:function(t){tedu.notify(t.responseText,"error"),tedu.stopLoading()}}),!1}),$("#btnPending").on("click",function(t){t.preventDefault();var e=$("#hidId").val();return $.ajax({type:"POST",url:"/Admin/Bill/PendingBill",data:{billId:e},beforeSend:function(){tedu.startLoading()},success:function(t){tedu.notify(t,"success"),$("#modal-detail").modal("hide"),r(),tedu.stopLoading(),d(!0)},error:function(t){tedu.notify(t.responseText,"error"),tedu.stopLoading()}}),!1}),$("#btnAddDetail").on("click",function(){var t=$("#template-table-bill-details").html(),e=Mustache.render(t,{Id:0,Products:i(0,0),Quantity:0,Total:0,TotalNumber:0});$("#tbl-bill-details").append(e)}),$("body").on("click",".btn-delete-detail",function(){$(this).parent().parent().remove()}),$("#btnExport").on("click",function(){var t=$("#hidId").val();$.ajax({type:"POST",url:"/Admin/Bill/ExportExcel",data:{billId:t},beforeSend:function(){tedu.startLoading()},success:function(t){window.location.href=t,tedu.stopLoading()}})})}function n(){return $.ajax({type:"GET",url:"/admin/bill/GetBillStatus",dataType:"json",success:function(t){u.billStatuses=t;var e="";$.each(t,function(t,n){e+="<option value='"+n.Value+"'>"+n.Name+"</option>"}),$("#ddlBillStatus").html(e)}})}function a(){return $.ajax({type:"GET",url:"/admin/bill/GetPaymentMethod",dataType:"json",success:function(t){u.paymentMethods=t;var e="";$.each(t,function(t,n){e+="<option value='"+n.Value+"'>"+n.Name+"</option>"}),$("#ddlPaymentMethod").html(e)}})}function o(){return $.ajax({type:"GET",url:"/Admin/Product/GetAll",dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(t){u.products=t,tedu.stopLoading(),$("#btn-create").removeAttr("disabled")},error:function(){tedu.notify("Có lỗi xảy ra","error")}})}function i(t,e){var n="<select data-price='"+e+"' class='form-control ddlProductId'>";return $.each(u.products,function(e,a){n+=t===a.Id?'<option value="'+a.Id+'" selected="select">'+a.Name+"-"+a.Code+"</option>":'<option value="'+a.Id+'">'+a.Name+"-"+a.Code+"</option>"}),n+="</select>"}function r(){$("#hidId").val(0),$("#txtCustomerName").val(""),$("#txtCustomerAddress").val(""),$("#txtCustomerMobile").val(""),$("#txtCustomerMessage").val(""),$("#ddlPaymentMethod").val(""),$("#ddlCustomerId").val(""),$("#ddlBillStatus").val(""),$("#tbl-bill-details").html(""),$("#txtCustomerFacebook").val(""),$("#txtShippingFee").val("0"),$("#lblTotalAmount").val("0")}function d(t){$.ajax({type:"GET",url:"/admin/bill/GetAllPaging",data:{startDate:$("#txtFromDate").val(),endDate:$("#txtToDate").val(),keyword:$("#txtSearchKeyword").val(),page:tedu.configs.pageIndex,pageSize:tedu.configs.pageSize},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(e){var n=$("#table-template").html(),a="";e.RowCount>0?($.each(e.Results,function(t,e){a+=Mustache.render(n,{CustomerName:e.CustomerName,Id:e.Id,PaymentMethod:c(e.PaymentMethod),DateCreated:tedu.dateTimeFormatJson(e.DateCreated),BillStatus:l(e.BillStatus)})}),$("#lbl-total-records").text(e.RowCount),void 0!==a&&$("#tbl-content").html(a),s(e.RowCount,function(){d()},t)):$("#tbl-content").html(""),tedu.stopLoading()},error:function(t){console.log(t)}})}function c(t){var e=$.grep(u.paymentMethods,function(e){return e.Value===t});return e.length>0?e[0].Name:""}function l(t){return 1===t?'<span class="badge bg-red">Đơn mới</span>':2===t?'<span class="badge badge-primary">Đang xử lý</span>':3===t?'<span class="badge badge-secondary">Đã huỷ</span>':5===t?'<span class="badge badge-info">Đang giao</span>':6===t?'<span class="badge badge-success">Đã hoàn tất</span>':7===t?'<span class="badge badge-warning">Đã hoãn</span>':void 0}function s(t,e,n){var a=Math.ceil(t/tedu.configs.pageSize);0!==$("#paginationUL a").length&&n!==!0||($("#paginationUL").empty(),$("#paginationUL").removeData("twbs-pagination"),$("#paginationUL").unbind("page")),$("#paginationUL").twbsPagination({totalPages:a,visiblePages:7,first:"Đầu",prev:"Trước",next:"Tiếp",last:"Cuối",onPageClick:function(t,n){tedu.configs.pageIndex=n,setTimeout(e(),200)}})}var u={products:[],productItems:[],paymentMethods:[],billStatuses:[]};this.initialize=function(){$.when(n(),a(),o()).done(function(){d()}),e()};var p=function(){var t=0;return function(e,n){clearTimeout(t),t=setTimeout(e,n)}}()},PageController=function(){function t(){$("#frmMaintainance").validate({errorClass:"red",ignore:[],lang:"vi",rules:{txtNameM:{required:!0},txtAliasM:{required:!0}}}),$("#txt-search-keyword").keypress(function(t){13===t.which&&(t.preventDefault(),a())}),$("#btn-search").on("click",function(){a()}),$("#ddl-show-page").on("change",function(){tedu.configs.pageSize=$(this).val(),tedu.configs.pageIndex=1,a(!0)}),$("#btn-create").on("click",function(){e(),$("#modal-add-edit").modal("show")}),$("body").on("click",".btn-edit",function(t){t.preventDefault();var e=$(this).data("id");$.ajax({type:"GET",url:"/Admin/Page/GetById",data:{id:e},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(t){var e=t;$("#hidIdM").val(e.Id),$("#txtNameM").val(e.Name),$("#txtAliasM").val(e.Alias),CKEDITOR.instances.txtContentM.setData(e.Content),$("#ckStatusM").prop("checked",1===e.Status),$("#modal-add-edit").modal("show"),tedu.stopLoading()},error:function(){tedu.notify("Có lỗi xảy ra","error"),tedu.stopLoading()}})}),$("#btnSaveM").on("click",function(t){if($("#frmMaintainance").valid()){t.preventDefault();var n=$("#hidIdM").val(),o=$("#txtNameM").val(),i=$("#txtAliasM").val(),r=CKEDITOR.instances.txtContentM.getData(),d=$("#ckStatusM").prop("checked")===!0?1:0;return $.ajax({type:"POST",url:"/Admin/Blog/SaveEntity",data:{Id:n,Name:o,Content:r,Status:d,Alias:i},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Cập nhật sản phẩm thành công","success"),$("#modal-add-edit").modal("hide"),e(),tedu.stopLoading(),a(!0)},error:function(){tedu.notify("Cập nhật sản phẩm có lỗi xảy ra","error"),tedu.stopLoading()}}),!1}return!1}),$("body").on("click",".btn-delete",function(t){t.preventDefault();var e=$(this).data("id");tedu.confirm("Bạn có chắc chắn muốn xoá?",function(){$.ajax({type:"POST",url:"/Admin/Page/Delete",data:{id:e},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Xoá thành công","success"),tedu.stopLoading(),a()},error:function(){tedu.notify("Xoá không thành công","error"),tedu.stopLoading()}})})})}function e(){$("#hidIdM").val(0),$("#txtNameM").val(""),$("#txtAliasM").val(""),CKEDITOR.instances.txtContentM.setData(""),$("#ckStatusM").prop("checked",!0)}function n(){var t={filebrowserImageUploadUrl:"/Admin/Upload/UploadImageForCKEditor?type=Images"};CKEDITOR.replace("txtContentM",t),$.fn.modal.Constructor.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||$(t.target).closest(".cke_dialog, .cke").length||this.$element.trigger("focus")},this))}}function a(t){$.ajax({type:"GET",url:"/admin/page/GetAllPaging",data:{keyword:$("#txt-search-keyword").val(),page:tedu.configs.pageIndex,pageSize:tedu.configs.pageSize},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(e){var n=$("#table-template").html(),i="";e.RowCount>0?($.each(e.Results,function(t,e){i+=Mustache.render(n,{Name:e.Name,Alias:e.Alias,Id:e.Id,Status:tedu.getStatus(e.Status)})}),$("#lbl-total-records").text(e.RowCount),void 0!=i&&$("#tbl-content").html(i),o(e.RowCount,function(){a()},t)):$("#tbl-content").html(""),tedu.stopLoading()},error:function(t){console.log(t)}})}function o(t,e,n){var a=Math.ceil(t/tedu.configs.pageSize);0!==$("#paginationUL a").length&&n!==!0||($("#paginationUL").empty(),$("#paginationUL").removeData("twbs-pagination"),$("#paginationUL").unbind("page")),$("#paginationUL").twbsPagination({totalPages:a,visiblePages:7,first:"Đầu",prev:"Trước",next:"Tiếp",last:"Cuối",onPageClick:function(t,n){tedu.configs.pageIndex=n,setTimeout(e(),200)}})}this.initialize=function(){a(),t(),n()}},HomeController=function(){function t(){if("undefined"!=typeof $.fn.daterangepicker){var t=function(t,e,n){console.log(t.toISOString(),e.toISOString(),n),$("#reportrange span").html(t.format("MMMM D, YYYY")+" - "+e.format("MMMM D, YYYY"))},n={startDate:moment().subtract(29,"days"),endDate:moment(),minDate:"01/01/2010",maxDate:moment().format("MM/DD/YYYY"),dateLimit:{days:60},showDropdowns:!0,showWeekNumbers:!0,timePicker:!1,timePickerIncrement:1,timePicker12Hour:!0,ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},opens:"left",buttonClasses:["btn btn-default"],applyClass:"btn-small btn-primary",cancelClass:"btn-small",format:"MM/DD/YYYY",separator:" to ",locale:{applyLabel:"Submit",cancelLabel:"Clear",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDay:1}};$("#reportrange span").html(moment().subtract(29,"days").format("MMMM D, YYYY")+" - "+moment().format("MMMM D, YYYY")),$("#reportrange").daterangepicker(n,t),$("#reportrange").on("show.daterangepicker",function(){console.log("show event fired")}),$("#reportrange").on("hide.daterangepicker",function(){console.log("hide event fired")}),$("#reportrange").on("apply.daterangepicker",function(t,n){console.log("apply event fired, start/end dates are "+n.startDate.format("MMMM D, YYYY")+" to "+n.endDate.format("MMMM D, YYYY")),e(n.startDate.format("MM/DD/YYYY"),n.endDate.format("MM/DD/YYYY"))}),$("#reportrange").on("cancel.daterangepicker",function(t,e){console.log("cancel event fired")}),$("#options1").click(function(){$("#reportrange").data("daterangepicker").setOptions(n,t)}),$("#destroy").click(function(){$("#reportrange").data("daterangepicker").remove()})}}function e(t,e){$.ajax({type:"GET",url:"/Admin/Home/GetRevenue",data:{fromDate:t,toDate:e},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(t){n(t),tedu.stopLoading()},error:function(t){tedu.notify("Có lỗi xảy ra","error"),tedu.stopLoading()}})}function n(t){var e=[],n=[];$.each(t,function(t,n){var a=new Date(n.Date);e.push([gd(a.getFullYear(),a.getMonth()+1,a.getDate()),n.Revenue])}),$.each(t,function(t,e){var a=new Date(e.Date);n.push([gd(a.getFullYear(),a.getMonth()+1,a.getDate()),e.Profit])});var a={series:{lines:{show:!1,fill:!0},splines:{show:!0,tension:.4,lineWidth:1,fill:.4},points:{radius:0,show:!0},shadowSize:2},grid:{verticalLines:!0,hoverable:!0,clickable:!0,tickColor:"#d5d5d5",borderWidth:1,color:"#fff"},colors:["rgba(38, 185, 154, 0.38)","rgba(3, 88, 106, 0.38)"],xaxis:{tickColor:"rgba(51, 51, 51, 0.06)",mode:"time",tickSize:[1,"day"],axisLabel:"Date",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:10},yaxis:{ticks:8,tickColor:"rgba(51, 51, 51, 0.06)"},tooltip:!1};$("#chart_plot_01").length&&$.plot($("#chart_plot_01"),[e,n],a)}this.initialize=function(){t(),e()}},LoginController=function(){var t=function(t,e){$.ajax({type:"POST",data:{UserName:t,Password:e},dataType:"json",url:"/admin/login/authen",beforeSend:function(){tedu.startLoading()},success:function(t){t.Success?window.location.href="/Admin/Home/Index":tedu.notify("Đăng nhập không đúng","error")}})},e=function(){$("#btnLogin").off("click").on("click",function(){var e=$("#txtUserName").val(),n=$("#txtPassword").val();t(e,n)})};this.initialize=function(){e()}},PageController=function(){function t(){$("#frmMaintainance").validate({errorClass:"red",ignore:[],lang:"vi",rules:{txtNameM:{required:!0},txtAliasM:{required:!0}}}),$("#txt-search-keyword").keypress(function(t){13===t.which&&(t.preventDefault(),a())}),$("#btn-search").on("click",function(){a()}),$("#ddl-show-page").on("change",function(){tedu.configs.pageSize=$(this).val(),tedu.configs.pageIndex=1,a(!0)}),$("#btn-create").on("click",function(){e(),$("#modal-add-edit").modal("show")}),$("body").on("click",".btn-edit",function(t){t.preventDefault();var e=$(this).data("id");$.ajax({type:"GET",url:"/Admin/Page/GetById",data:{id:e},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(t){var e=t;$("#hidIdM").val(e.Id),$("#txtNameM").val(e.Name),$("#txtAliasM").val(e.Alias),CKEDITOR.instances.txtContentM.setData(e.Content),$("#ckStatusM").prop("checked",1===e.Status),$("#modal-add-edit").modal("show"),tedu.stopLoading()},error:function(){tedu.notify("Có lỗi xảy ra","error"),tedu.stopLoading()}})}),$("#btnSaveM").on("click",function(t){if($("#frmMaintainance").valid()){t.preventDefault();var n=$("#hidIdM").val(),o=$("#txtNameM").val(),i=$("#txtAliasM").val(),r=CKEDITOR.instances.txtContentM.getData(),d=$("#ckStatusM").prop("checked")===!0?1:0;return $.ajax({type:"POST",url:"/Admin/Page/SaveEntity",data:{Id:n,Name:o,Content:r,Status:d,Alias:i},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Cập nhật sản phẩm thành công","success"),$("#modal-add-edit").modal("hide"),e(),tedu.stopLoading(),a(!0)},error:function(){tedu.notify("Cập nhật sản phẩm có lỗi xảy ra","error"),tedu.stopLoading()}}),!1}return!1}),$("body").on("click",".btn-delete",function(t){t.preventDefault();var e=$(this).data("id");tedu.confirm("Bạn có chắc chắn muốn xoá?",function(){$.ajax({type:"POST",url:"/Admin/Page/Delete",data:{id:e},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Xoá thành công","success"),tedu.stopLoading(),a()},error:function(){tedu.notify("Xoá không thành công","error"),tedu.stopLoading()}})})})}function e(){$("#hidIdM").val(0),$("#txtNameM").val(""),$("#txtAliasM").val(""),CKEDITOR.instances.txtContentM.setData(""),$("#ckStatusM").prop("checked",!0)}function n(){var t={filebrowserImageUploadUrl:"/Admin/Upload/UploadImageForCKEditor?type=Images"};CKEDITOR.replace("txtContentM",t),$.fn.modal.Constructor.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||$(t.target).closest(".cke_dialog, .cke").length||this.$element.trigger("focus")},this))}}function a(t){$.ajax({type:"GET",url:"/admin/page/GetAllPaging",data:{keyword:$("#txt-search-keyword").val(),page:tedu.configs.pageIndex,pageSize:tedu.configs.pageSize},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(e){var n=$("#table-template").html(),i="";e.RowCount>0?($.each(e.Results,function(t,e){i+=Mustache.render(n,{Name:e.Name,Alias:e.Alias,Id:e.Id,Status:tedu.getStatus(e.Status)})}),$("#lbl-total-records").text(e.RowCount),void 0!=i&&$("#tbl-content").html(i),o(e.RowCount,function(){a()},t)):$("#tbl-content").html(""),tedu.stopLoading()},error:function(t){console.log(t)}})}function o(t,e,n){var a=Math.ceil(t/tedu.configs.pageSize);0!==$("#paginationUL a").length&&n!==!0||($("#paginationUL").empty(),$("#paginationUL").removeData("twbs-pagination"),$("#paginationUL").unbind("page")),$("#paginationUL").twbsPagination({totalPages:a,visiblePages:7,first:"Đầu",prev:"Trước",next:"Tiếp",last:"Cuối",onPageClick:function(t,n){tedu.configs.pageIndex=n,setTimeout(e(),200)}})}this.initialize=function(){a(),t(),n()}},ImageManagement=function(t){function e(){$("body").on("click",".btn-images",function(t){t.preventDefault();var e=$(this).data("id");$("#hidId").val(e),a($("#fileImage")),n(),$("#modal-image-manage").modal("show")}),$("#fileImage").on("change",function(){for(var t=$(this).get(0),e=t.files,n=new FormData,i=0;i<e.length;i++)n.append(e[i].name,e[i]);$.ajax({type:"POST",url:"/Admin/Upload/UploadImage",contentType:!1,processData:!1,data:n,success:function(t){a($("#fileImage")),o.push(t),$("#image-list").append('<div class="col-md-3"><img width="100"  data-path="'+t+'" src="'+t+'"></div>'),tedu.notify("Đã tải ảnh lên thành công!","success")},error:function(){tedu.notify("There was error uploading files!","error")}})}),$("#btnSaveImages").on("click",function(){var t=[];$.each($("#image-list").find("img"),function(e,n){t.push($(this).data("path"))}),$.ajax({url:"/admin/Product/SaveImages",data:{productId:$("#hidId").val(),images:o},type:"post",dataType:"json",success:function(t){$("#modal-image-manage").modal("hide"),$("#image-list").html(""),a($("#fileImage"))}})})}function n(){$.ajax({url:"/admin/Product/GetImages",data:{productId:$("#hidId").val()},type:"get",dataType:"json",success:function(t){var e="";$.each(t,function(t,n){e+='<div class="col-md-3"><img width="100" src="'+n.Path+'"><br/><a href="#" class="btn-delete-image">Xóa</a></div>'}),$("#image-list").html(e)}})}function a(t){try{t.value=null}catch(t){}t.value&&t.parentNode.replaceChild(t.cloneNode(!0),t)}var o=[];this.initialize=function(){e()}},productController=function(){function t(){$("#frmMaintainance").validate({errorClass:"red",ignore:[],lang:"vi",rules:{txtNameM:{required:!0},ddlCategoryIdM:{required:!0},txtPriceM:{required:!0,number:!0},txtOriginalPriceM:{required:!0},txtQuantityM:{required:!0}}}),$("#txt-search-keyword").keypress(function(t){13===t.which&&(t.preventDefault(),o())}),$("#btn-search").on("click",function(){o()}),$("#fileInputImage").on("change",function(){for(var t=$(this).get(0),e=t.files,n=new FormData,a=0;a<e.length;a++)n.append(e[a].name,e[a]);$.ajax({type:"POST",url:"/Admin/Upload/UploadImage",contentType:!1,processData:!1,data:n,success:function(t){$("#txtImageM").val(t),tedu.notify("Đã tải ảnh lên thành công!","success")},error:function(){tedu.notify("There was error uploading files!","error")}})}),$("#btnSelectImg").on("click",function(){$("#fileInputImage").click()}),$("#ddl-show-page").on("change",function(){tedu.configs.pageSize=$(this).val(),tedu.configs.pageIndex=1,o(!0)}),$("#btn-create").on("click",function(){e(),a(),$("#modal-add-edit").modal("show")}),$("body").on("click",".btn-edit",function(t){t.preventDefault();var e=$(this).data("id");r(e)}),$("#btnSaveM").on("click",function(t){return!!$("#frmMaintainance").valid()&&(t.preventDefault(),i(),!1)}),$("body").on("click",".btn-delete",function(t){t.preventDefault();var e=$(this).data("id");tedu.confirm("Bạn có chắc chắn muốn xoá?",function(){$.ajax({type:"POST",url:"/Admin/Product/Delete",data:{id:e},beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Xoá thành công","success"),tedu.stopLoading(),o()},error:function(){tedu.notify("Xoá không thành công","error"),tedu.stopLoading()}})})}),$("#btn-import").on("click",function(){a(),$("#modal-import-excel").modal("show")}),$("#btnImportExcel").on("click",function(t){t.preventDefault();for(var e=$("#fileInputExcel").get(0),n=e.files,a=new FormData,i=0;i<n.length;i++)a.append("files",n[i]);return a.append("categoryId",$("#ddlCategoryIdImportExcel").combotree("getValue")),$.ajax({url:"/Admin/Product/ImportExcel",type:"POST",data:a,processData:!1,contentType:!1,success:function(){$("#modal-import-excel").modal("hide"),o()}}),!1}),$("#btn-export").on("click",function(){$.ajax({type:"POST",url:"/Admin/Product/ExportExcel",beforeSend:function(){tedu.startLoading()},success:function(t){window.location.href=t,tedu.stopLoading()},error:function(){tedu.notify("Has an error in progress","error"),tedu.stopLoading()}})})}function e(){$("#hidIdM").val(0),$("#txtNameM").val(""),$("#txtCodeM").val(""),a(""),$("#txtDescM").val(""),$("#txtUnitM").val(""),$("#txtPriceM").val(""),
$("#txtOriginalPriceM").val(""),$("#txtPromotionPriceM").val(""),$("#txtQuantityM").val(""),$("#txtImageM").val(""),$("#txtTagM").val(""),$("#txtMetakeywordM").val(""),$("#txtMetaDescriptionM").val(""),$("#txtSeoPageTitleM").val(""),$("#txtSeoAliasM").val(""),CKEDITOR.instances.txtContentM.setData(""),$("#ckStatusM").prop("checked",!0),$("#ckHotM").prop("checked",!1),$("#ckShowHomeM").prop("checked",!1)}function n(){var t={filebrowserImageUploadUrl:"/Admin/Upload/UploadImageForCKEditor?type=Images"};CKEDITOR.replace("txtContentM",t),$.fn.modal.Constructor.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||$(t.target).closest(".cke_dialog, .cke").length||this.$element.trigger("focus")},this))}}function a(t){return $.ajax({url:"/Admin/ProductCategory/GetAll",type:"GET",dataType:"json",async:!1,success:function(e){var n=[];$.each(e,function(t,e){n.push({id:e.Id,text:e.Name,parentId:e.ParentId,sortOrder:e.SortOrder})});var a=tedu.unflattern1(n);$("#ddlCategoryIdM").combotree({data:a}),$("#ddlCategoryIdImportExcel").combotree({data:a}),$("#ddlCategoryIdS").combotree({data:a}),void 0!=t&&$("#ddlCategoryIdM").combotree("setValue",t)}})}function o(t){$.ajax({type:"GET",url:"/admin/product/GetAllPaging",data:{categoryId:$("#ddlCategoryIdS").combotree("getValue"),keyword:$("#txt-search-keyword").val(),page:tedu.configs.pageIndex,pageSize:tedu.configs.pageSize},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(e){var n=$("#table-template").html(),a="";e.RowCount>0?($.each(e.Results,function(t,e){a+=Mustache.render(n,{Id:e.Id,Name:e.Name,Code:e.Code,OriginalPrice:tedu.formatNumber(e.OriginalPrice,0),Quantity:tedu.formatNumber(e.Quantity,0),CategoryName:e.ProductCategory.Name,Price:tedu.formatNumber(e.Price,0),Image:void 0==e.ThumbnailImage?'<img src="/admin-side/images/user.png" width=25 />':'<img src="'+e.ThumbnailImage+'" width=25 />',DateCreated:tedu.dateTimeFormatJson(e.DateCreated),Status:tedu.getStatus(e.Status)})}),$("#lbl-total-records").text(e.RowCount),void 0!=a&&$("#tbl-content").html(a),d(e.RowCount,function(){o()},t)):$("#tbl-content").html(""),tedu.stopLoading()},error:function(t){console.log(t)}})}function i(){var t=$("#hidIdM").val(),n=$("#txtNameM").val(),a=$("#txtCodeM").val(),i=$("#ddlCategoryIdM").combotree("getValue"),r=$("#txtDescM").val(),d=$("#txtUnitM").val(),c=$("#txtPriceM").val(),l=$("#txtOriginalPriceM").val(),s=$("#txtPromotionPriceM").val(),u=$("#txtImageM").val(),p=$("#txtTagM").val(),f=$("#txtMetakeywordM").val(),g=$("#txtMetaDescriptionM").val(),m=$("#txtSeoPageTitleM").val(),h=$("#txtSeoAliasM").val(),v=$("#txtQuantityM").val(),y=CKEDITOR.instances.txtContentM.getData(),x=$("#ckStatusM").prop("checked")===!0?1:0,b=$("#ckHotM").prop("checked"),k=$("#ckShowHomeM").prop("checked");$.ajax({type:"POST",url:"/Admin/Product/SaveEntity",data:{Id:t,Name:n,Code:a,Quantity:v,CategoryId:i,ThumbnailImage:u,Price:c,OriginalPrice:l,PromotionPrice:s,Description:r,Content:y,HomeFlag:k,HotFlag:b,Tags:p,Unit:d,Status:x,SeoPageTitle:m,SeoAlias:h,SeoKeywords:f,SeoDescription:g},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Cập nhật sản phẩm thành công","success"),$("#modal-add-edit").modal("hide"),e(),tedu.stopLoading(),o(!0)},error:function(){tedu.notify("Cập nhật sản phẩm có lỗi xảy ra","error"),tedu.stopLoading()}})}function r(t){$.ajax({type:"GET",url:"/Admin/Product/GetById",data:{id:t},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(t){var e=t;$("#hidIdM").val(e.Id),$("#txtNameM").val(e.Name),$("#txtCodeM").val(e.Code),a(e.CategoryId),$("#txtDescM").val(e.Description),$("#txtUnitM").val(e.Unit),$("#txtPriceM").val(e.Price),$("#txtOriginalPriceM").val(e.OriginalPrice),$("#txtPromotionPriceM").val(e.PromotionPrice),$("#txtImageM").val(e.ThumbnailImage),$("#txtTagM").val(e.Tags),$("#txtMetakeywordM").val(e.SeoKeywords),$("#txtMetaDescriptionM").val(e.SeoDescription),$("#txtSeoPageTitleM").val(e.SeoPageTitle),$("#txtSeoAliasM").val(e.SeoAlias),CKEDITOR.instances.txtContentM.setData(e.Content),$("#ckStatusM").prop("checked",1===e.Status),$("#ckHotM").prop("checked",e.HotFlag),$("#ckShowHomeM").prop("checked",e.HomeFlag),$("#txtQuantityM").val(e.Quantity),$("#modal-add-edit").modal("show"),tedu.stopLoading()},error:function(){tedu.notify("Có lỗi xảy ra","error"),tedu.stopLoading()}})}function d(t,e,n){var a=Math.ceil(t/tedu.configs.pageSize);0!==$("#paginationUL a").length&&n!==!0||($("#paginationUL").empty(),$("#paginationUL").removeData("twbs-pagination"),$("#paginationUL").unbind("page")),$("#paginationUL").twbsPagination({totalPages:a,visiblePages:7,first:"Đầu",prev:"Trước",next:"Tiếp",last:"Cuối",onPageClick:function(t,n){tedu.configs.pageIndex=n,setTimeout(e(),200)}})}var c=new ImageManagement(self);this.initialize=function(){$.when(a()).then(function(){o()}),t(),n(),c.initialize()}},QuantityManagement=function(){function t(){$("body").on("click",".btn-quantity",function(t){t.preventDefault();var n=$(this).data("id");$("#hidId").val(n),e(),$("#modal-quantity-management").modal("show")}),$("body").on("click",".btn-delete-quantity",function(t){t.preventDefault(),$(this).closest("tr").remove()}),$("#btn-add-quantity").on("click",function(){var t=$("#template-table-quantity").html(),e=Mustache.render(t,{Id:0,Colors:o(null),Sizes:i(null),Quantity:0});$("#table-quantity-content").append(e)}),$("#btnSaveQuantity").on("click",function(){var t=[];$.each($("#table-quantity-content").find("tr"),function(e,n){t.push({Id:$(n).data("id"),ProductId:$("#hidId").val(),Quantity:$(n).find("input.txtQuantity").first().val(),SizeId:$(n).find("select.ddlSizeId").first().val(),ColorId:$(n).find("select.ddlColorId").first().val()})}),$.ajax({url:"/admin/Product/SaveQuantities",data:{productId:$("#hidId").val(),quantities:t},type:"post",dataType:"json",success:function(t){$("#modal-quantity-management").modal("hide"),$("#table-quantity-content").html("")}})})}function e(){$.ajax({url:"/admin/Product/GetQuantities",data:{productId:$("#hidId").val()},type:"get",dataType:"json",success:function(t){var e="",n=$("#template-table-quantity").html();$.each(t,function(t,a){e+=Mustache.render(n,{Id:a.Id,Colors:o(a.ColorId),Sizes:i(a.SizeId),Quantity:a.Quantity})}),$("#table-quantity-content").html(e),resetFile()}})}function n(){return $.ajax({type:"GET",url:"/Admin/Bill/GetColors",dataType:"json",success:function(t){r.colors=t},error:function(){tedu.notify("Có lỗi xảy ra","error")}})}function a(){return $.ajax({type:"GET",url:"/Admin/Bill/GetSizes",dataType:"json",success:function(t){r.sizes=t},error:function(){tedu.notify("Có lỗi xảy ra","error")}})}function o(t){var e="<select class='form-control ddlColorId'>";return $.each(r.colors,function(n,a){e+=t===a.Id?'<option value="'+a.Id+'" selected="select">'+a.Name+"</option>":'<option value="'+a.Id+'">'+a.Name+"</option>"}),e+="</select>"}function i(t){var e="<select class='form-control ddlSizeId'>";return $.each(r.sizes,function(n,a){e+=t===a.Id?'<option value="'+a.Id+'" selected="select">'+a.Name+"</option>":'<option value="'+a.Id+'">'+a.Name+"</option>"}),e+="</select>"}var r={colors:[],sizes:[]};this.initialize=function(){n(),a(),t()}},WholePriceManagement=function(t){function e(){$("body").on("click",".btn-whole-price",function(t){t.preventDefault();var e=$(this).data("id");$("#hidId").val(e),n(),$("#modal-whole-price").modal("show")}),$("body").on("click",".btn-delete-whole-price",function(t){t.preventDefault(),$(this).closest("tr").remove()}),$("#btn-add-whole-price").on("click",function(){var t=$("#template-table-whole-price").html(),e=Mustache.render(t,{Id:0,FromQuantity:0,ToQuantity:0,Price:0});$("#table-content-whole-price").append(e)}),$("#btnSaveWholePrice").on("click",function(){var t=[];$.each($("#table-content-whole-price").find("tr"),function(e,n){t.push({Id:$(n).data("id"),ProductId:$("#hidId").val(),FromQuantity:$(n).find("input.txtQuantityFrom").first().val(),ToQuantity:$(n).find("input.txtQuantityTo").first().val(),Price:$(n).find("input.txtWholePrice").first().val()})}),$.ajax({url:"/admin/Product/SaveWholePrice",data:{productId:$("#hidId").val(),wholePrices:t},type:"post",dataType:"json",success:function(t){$("#modal-whole-price").modal("hide"),$("#table-content-whole-price").html("")}})})}function n(){$.ajax({url:"/admin/Product/GetWholePrices",data:{productId:$("#hidId").val()},type:"get",dataType:"json",success:function(t){var e="",n=$("#template-table-whole-price").html();$.each(t,function(t,a){e+=Mustache.render(n,{Id:a.Id,FromQuantity:a.FromQuantity,ToQuantity:a.ToQuantity,Price:a.Price})}),$("#table-content-whole-price").html(e)}})}this.initialize=function(){e()}},productCategoryController=function(){function t(){$("#frmMaintainance").validate({errorClass:"red",ignore:[],lang:"vi",rules:{txtNameM:{required:!0},txtOrderM:{number:!0},txtCodeM:{required:!0},txtHomeOrderM:{number:!0}}}),$("#fileInputImage").on("change",function(){for(var t=$(this).get(0),e=t.files,n=new FormData,a=0;a<e.length;a++)n.append(e[a].name,e[a]);$.ajax({type:"POST",url:"/Admin/Upload/UploadImage",contentType:!1,processData:!1,data:n,success:function(t){$("#txtImageM").val(t),tedu.notify("Đã tải ảnh lên thành công!","success")},error:function(){tedu.notify("There was error uploading files!","error")}})}),$("#btnSelectImg").on("click",function(){$("#fileInputImage").click()}),$("#btn-create").on("click",function(){n(),a(),$("#modal-add-edit").modal("show")}),$("body").on("click","#btn-edit",function(t){t.preventDefault();var n=$("#hidIdM").val();e(n)}),$("#btnSaveM").on("click",function(t){if($("#frmMaintainance").valid()){t.preventDefault();var e=parseInt($("#hidIdM").val()),n=$("#txtNameM").val(),i=$("#txtCodeM").val(),r=$("#ddlCategoryIdM").combotree("getValue"),d=$("#txtDescM").val(),c=$("#txtImageM").val(),l=$("#txtOrderM").val(),s=$("#txtHomeOrderM").val(),u=$("#txtSeoKeywordM").val(),p=$("#txtSeoDescriptionM").val(),f=$("#txtSeoPageTitleM").val(),g=$("#txtSeoAliasM").val(),m=$("#ckStatusM").prop("checked")===!0?1:0,h=$("#ckShowHomeM").prop("checked");return $.ajax({type:"POST",url:"/Admin/ProductCategory/SaveEntity",data:{Id:e,Name:n,Code:i,Description:d,ParentId:r,HomeOrder:s,SortOrder:l,HomeFlag:h,Image:c,Status:m,SeoPageTitle:f,SeoAlias:g,SeoKeywords:u,SeoDescription:p},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Cập nhật sản phẩm thành công","success"),$("#modal-add-edit").modal("hide"),a(),tedu.stopLoading(),o(!0)},error:function(){tedu.notify("Cập nhật sản phẩm có lỗi xảy ra","error"),tedu.stopLoading()}}),!1}}),$("body").on("click","#btn-delete",function(t){t.preventDefault();var e=$("#hidIdM").val();tedu.confirm("Bạn có chắc chắn muốn xoá?",function(){$.ajax({type:"POST",url:"/Admin/ProductCategory/Delete",data:{id:e},beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Xoá thành công","success"),tedu.stopLoading(),o()},error:function(){tedu.notify("Xoá không thành công","error"),tedu.stopLoading()}})})})}function e(t){$.ajax({type:"GET",url:"/Admin/ProductCategory/GetById",data:{id:t},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(t){var e=t;$("#hidIdM").val(e.Id),$("#txtNameM").val(e.Name),$("#txtCodeM").val(e.Code),n(e.CategoryId),$("#txtDescM").val(e.Description),$("#txtImageM").val(e.ThumbnailImage),$("#txtSeoKeywordM").val(e.SeoKeywords),$("#txtSeoDescriptionM").val(e.SeoDescription),$("#txtSeoPageTitleM").val(e.SeoPageTitle),$("#txtSeoAliasM").val(e.SeoAlias),$("#ckStatusM").prop("checked",1===e.Status),$("#ckShowHomeM").prop("checked",e.HomeFlag),$("#txtOrderM").val(e.SortOrder),$("#txtHomeOrderM").val(e.HomeOrder),$("#modal-add-edit").modal("show"),tedu.stopLoading()},error:function(){tedu.notify("Có lỗi xảy ra","error"),tedu.stopLoading()}})}function n(t){$.ajax({url:"/Admin/ProductCategory/GetAll",type:"GET",dataType:"json",async:!1,success:function(e){var n=[];$.each(e,function(t,e){n.push({id:e.Id,text:e.Name,parentId:e.ParentId,sortOrder:e.SortOrder})});var a=tedu.unflattern1(n);$("#ddlCategoryIdM").combotree({data:a}),void 0!=t&&$("#ddlCategoryIdM").combotree("setValue",t)}})}function a(){$("#hidIdM").val("0"),$("#txtNameM").val(""),$("#txtCodeM").val(""),n(""),$("#txtDescM").val(""),$("#txtOrderM").val(""),$("#txtHomeOrderM").val(""),$("#txtImageM").val(""),$("#txtSeoKeywordM").val(""),$("#txtSeoDescriptionM").val(""),$("#txtSeoPageTitleM").val(""),$("#txtSeoAliasM").val(""),$("#ckStatusM").prop("checked",!0),$("#ckShowHomeM").prop("checked",!1)}function o(){$.ajax({url:"/Admin/ProductCategory/GetAll",type:"GET",dataType:"json",async:!1,success:function(t){var n=[];$.each(t,function(t,e){n.push({id:e.Id,text:e.Name,parentId:e.ParentId,sortOrder:e.SortOrder})});var a=tedu.unflattern1(n);$("#treeProductCategory").tree({data:a,dnd:!0,onDblClick:function(t){e(t.id)},onContextMenu:function(t,e){t.preventDefault(),$("#tt").tree("select",e.target),$("#hidIdM").val(e.id),$("#mm").menu("show",{left:t.pageX,top:t.pageY})},onDrop:function(t,e,n){var a=$(this).tree("getNode",t);if("append"===n){var i=[];$.each(a.children,function(t,e){i.push({key:e.id,value:t})}),$.ajax({url:"/Admin/ProductCategory/UpdateParentId",type:"post",dataType:"json",data:{sourceId:e.id,targetId:a.id,items:i},success:function(){o()}})}else"top"!==n&&"bottom"!==n||$.ajax({url:"/Admin/ProductCategory/ReOrder",type:"post",dataType:"json",data:{sourceId:e.id,targetId:a.id},success:function(){o()}})}})}})}this.initialize=function(){o(),t()}},RoleController=function(){function t(){$("#frmMaintainance").validate({errorClass:"red",ignore:[],lang:"vi",rules:{txtName:{required:!0}}}),$("#txt-search-keyword").keypress(function(t){13==t.which&&(t.preventDefault(),o())}),$("#btn-search").on("click",function(){o()}),$("#ddl-show-page").on("change",function(){tedu.configs.pageSize=$(this).val(),tedu.configs.pageIndex=1,o(!0)}),$("#btn-create").on("click",function(){a(),$("#modal-add-edit").modal("show")}),$("body").on("click",".btn-edit",function(t){t.preventDefault();var e=$(this).data("id");$.ajax({type:"GET",url:"/Admin/Role/GetById",data:{id:e},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(t){var e=t;$("#hidId").val(e.Id),$("#txtName").val(e.Name),$("#txtDescription").val(e.Description),$("#modal-add-edit").modal("show"),tedu.stopLoading()},error:function(t){tedu.notify("Có lỗi xảy ra","error"),tedu.stopLoading()}})}),$("#btnSave").on("click",function(t){if($("#frmMaintainance").valid()){t.preventDefault();var e=$("#hidId").val(),n=$("#txtName").val(),i=$("#txtDescription").val();return $.ajax({type:"POST",url:"/Admin/Role/SaveEntity",data:{Id:e,Name:n,Description:i},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(t){tedu.notify("Cập nhật quyền thành công","success"),$("#modal-add-edit").modal("hide"),a(),tedu.stopLoading(),o(!0)},error:function(){tedu.notify("Cập nhật có lỗi xảy ra","error"),tedu.stopLoading()}}),!1}}),$("body").on("click",".btn-delete",function(t){t.preventDefault();var e=$(this).data("id");tedu.confirm("Bạn có chắc chắn muốn xoá?",function(){$.ajax({type:"POST",url:"/Admin/Role/Delete",data:{id:e},beforeSend:function(){tedu.startLoading()},success:function(t){tedu.notify("Xoá thành công","success"),tedu.stopLoading(),o()},error:function(t){tedu.notify("Xoá không thành công","error"),tedu.stopLoading()}})})}),$("body").on("click",".btn-grant",function(){$("#hidRoleId").val($(this).prop("id")),$.when(e()).done(n($("#hidRoleId").val())),$("#modal-grantpermission").modal("show")}),$("#btnSavePermission").off("click").on("click",function(){var t=[];$.each($("#tblFunction tbody tr"),function(e,n){t.push({RoleId:$("#hidRoleId").val(),FunctionId:$(n).data("id"),CanRead:$(n).find(".ckView").first().prop("checked"),CanCreate:$(n).find(".ckAdd").first().prop("checked"),CanUpdate:$(n).find(".ckEdit").first().prop("checked"),CanDelete:$(n).find(".ckDelete").first().prop("checked")})}),$.ajax({type:"POST",url:"/admin/role/SavePermission",data:{listPermmission:t,roleId:$("#hidRoleId").val()},beforeSend:function(){tedu.startLoading()},success:function(t){tedu.notify("Lưu thành công","success"),$("#modal-grantpermission").modal("hide"),tedu.stopLoading()},error:function(){tedu.notify("Có lỗi xảy ra","error"),tedu.stopLoading()}})})}function e(t){var e="/admin/Function/GetAll";return $.ajax({type:"GET",url:e,dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(e){var n=$("#result-data-function").html(),a="";$.each(e,function(t,e){a+=Mustache.render(n,{Name:e.Name,treegridparent:null!=e.ParentId?"treegrid-parent-"+e.ParentId:"",Id:e.Id,AllowCreate:e.AllowCreate?"checked":"",AllowEdit:e.AllowEdit?"checked":"",AllowView:e.AllowView?"checked":"",AllowDelete:e.AllowDelete?"checked":"",Status:tedu.getStatus(e.Status)})}),void 0!=a&&$("#lst-data-function").html(a),$(".tree").treegrid(),$("#ckCheckAllView").on("click",function(){$(".ckView").prop("checked",$(this).prop("checked"))}),$("#ckCheckAllCreate").on("click",function(){$(".ckAdd").prop("checked",$(this).prop("checked"))}),$("#ckCheckAllEdit").on("click",function(){$(".ckEdit").prop("checked",$(this).prop("checked"))}),$("#ckCheckAllDelete").on("click",function(){$(".ckDelete").prop("checked",$(this).prop("checked"))}),$(".ckView").on("click",function(){$(".ckView:checked").length==e.length?$("#ckCheckAllView").prop("checked",!0):$("#ckCheckAllView").prop("checked",!1)}),$(".ckAdd").on("click",function(){$(".ckAdd:checked").length==e.length?$("#ckCheckAllCreate").prop("checked",!0):$("#ckCheckAllCreate").prop("checked",!1)}),$(".ckEdit").on("click",function(){$(".ckEdit:checked").length==e.length?$("#ckCheckAllEdit").prop("checked",!0):$("#ckCheckAllEdit").prop("checked",!1)}),$(".ckDelete").on("click",function(){$(".ckDelete:checked").length==e.length?$("#ckCheckAllDelete").prop("checked",!0):$("#ckCheckAllDelete").prop("checked",!1)}),void 0!=t&&t(),tedu.stopLoading()},error:function(t){console.log(t)}})}function n(t){var e="/Admin/Role/ListAllFunction";return $.ajax({type:"POST",url:e,data:{roleId:t},dataType:"json",beforeSend:function(){tedu.stopLoading()},success:function(t){var e=t;$.each($("#tblFunction tbody tr"),function(t,n){$.each(e,function(t,e){e.FunctionId==$(n).data("id")&&($(n).find(".ckView").first().prop("checked",e.CanRead),$(n).find(".ckAdd").first().prop("checked",e.CanCreate),$(n).find(".ckEdit").first().prop("checked",e.CanUpdate),$(n).find(".ckDelete").first().prop("checked",e.CanDelete))})}),$(".ckView:checked").length==$("#tblFunction tbody tr .ckView").length?$("#ckCheckAllView").prop("checked",!0):$("#ckCheckAllView").prop("checked",!1),$(".ckAdd:checked").length==$("#tblFunction tbody tr .ckAdd").length?$("#ckCheckAllCreate").prop("checked",!0):$("#ckCheckAllCreate").prop("checked",!1),$(".ckEdit:checked").length==$("#tblFunction tbody tr .ckEdit").length?$("#ckCheckAllEdit").prop("checked",!0):$("#ckCheckAllEdit").prop("checked",!1),$(".ckDelete:checked").length==$("#tblFunction tbody tr .ckDelete").length?$("#ckCheckAllDelete").prop("checked",!0):$("#ckCheckAllDelete").prop("checked",!1),tedu.stopLoading()},error:function(t){console.log(t)}})}function a(){$("#hidId").val(""),$("#txtName").val(""),$("#txtDescription").val("")}function o(t){$.ajax({type:"GET",url:"/admin/role/GetAllPaging",data:{keyword:$("#txt-search-keyword").val(),page:tedu.configs.pageIndex,pageSize:tedu.configs.pageSize},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(e){var n=$("#table-template").html(),a="";e.RowCount>0?($.each(e.Results,function(t,e){a+=Mustache.render(n,{Name:e.Name,Id:e.Id,Description:e.Description})}),$("#lbl-total-records").text(e.RowCount),void 0!=a&&$("#tbl-content").html(a),i(e.RowCount,function(){o()},t)):$("#tbl-content").html(""),tedu.stopLoading()},error:function(t){console.log(t)}})}function i(t,e,n){var a=Math.ceil(t/tedu.configs.pageSize);0!==$("#paginationUL a").length&&n!==!0||($("#paginationUL").empty(),$("#paginationUL").removeData("twbs-pagination"),$("#paginationUL").unbind("page")),$("#paginationUL").twbsPagination({totalPages:a,visiblePages:7,first:"Đầu",prev:"Trước",next:"Tiếp",last:"Cuối",onPageClick:function(t,n){tedu.configs.pageIndex=n,setTimeout(e(),200)}})}this.initialize=function(){o(),t()}},SlideController=function(){function t(){$("#frmMaintainance").validate({errorClass:"red",ignore:[],lang:"vi",rules:{txtNameM:{required:!0},txtImageM:{required:!0},txtGroupAliasM:{required:!0},txtDisplayOrderM:{required:!0,number:!0}}}),$("#txt-search-keyword").keypress(function(t){13===t.which&&(t.preventDefault(),n())}),$("#btn-search").on("click",function(){n()}),$("#fileInputImage").on("change",function(){for(var t=$(this).get(0),e=t.files,n=new FormData,a=0;a<e.length;a++)n.append(e[a].name,e[a]);$.ajax({type:"POST",url:"/Admin/Upload/UploadImage",contentType:!1,processData:!1,data:n,success:function(t){$("#txtImageM").val(t),tedu.notify("Đã tải ảnh lên thành công!","success")},error:function(){tedu.notify("There was error uploading files!","error")}})}),$("#btnSelectImg").on("click",function(){$("#fileInputImage").click()}),$("#ddl-show-page").on("change",function(){tedu.configs.pageSize=$(this).val(),tedu.configs.pageIndex=1,n(!0)}),$("#btn-create").on("click",function(){e(),$("#modal-add-edit").modal("show")}),$("body").on("click",".btn-edit",function(t){t.preventDefault();var e=$(this).data("id");o(e)}),$("#btnSaveM").on("click",function(t){return!!$("#frmMaintainance").valid()&&(t.preventDefault(),a(),!1)}),$("body").on("click",".btn-delete",function(t){t.preventDefault();var e=$(this).data("id");tedu.confirm("Bạn có chắc chắn muốn xoá?",function(){$.ajax({type:"POST",url:"/Admin/Slide/Delete",data:{id:e},beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Xoá thành công","success"),tedu.stopLoading(),n()},error:function(){tedu.notify("Xoá không thành công","error"),tedu.stopLoading()}})})})}function e(){$("#hidIdM").val(0),$("#txtNameM").val(""),$("#txtDescM").val(""),$("#txtImageM").val(""),$("#txtGroupAliasM").val(""),$("#txtDisplayOrderM").val(""),$("#txtUrlM").val(""),$("#ckStatusM").prop("checked",!0)}function n(t){$.ajax({type:"GET",url:"/Admin/Slide/GetAllPaging",data:{categoryId:$("#ddl-category-search").val(),keyword:$("#txt-search-keyword").val(),page:tedu.configs.pageIndex,pageSize:tedu.configs.pageSize},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(e){var a=$("#table-template").html(),o="";e.RowCount>0?($.each(e.Results,function(t,e){o+=Mustache.render(a,{Name:e.Name,Id:e.Id,GroupAlias:e.GroupAlias,Image:void 0==e.Image?'<img src="/admin-side/images/user.png" width=25 />':'<img src="'+e.Image+'" width=25 />',Status:tedu.getStatus(e.Status)})}),$("#lbl-total-records").text(e.RowCount),void 0!=o&&$("#tbl-content").html(o),i(e.RowCount,function(){n()},t)):$("#tbl-content").html(""),tedu.stopLoading()},error:function(t){console.log(t)}})}function a(){var t=$("#hidIdM").val(),a=$("#txtNameM").val(),o=$("#txtDescM").val(),i=$("#txtImageM").val(),r=$("#txtGroupAliasM").val(),d=$("#txtDisplayOrderM").val(),c=$("#txtUrlM").val(),l=$("#ckStatusM").prop("checked");$.ajax({type:"POST",url:"/Admin/Slide/SaveEntity",data:{Id:t,Name:a,Description:o,DisplayOrder:d,GroupAlias:r,Image:i,Url:c,Status:l},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Cập nhật sản phẩm thành công","success"),$("#modal-add-edit").modal("hide"),e(),tedu.stopLoading(),n(!0)},error:function(){tedu.notify("Cập nhật sản phẩm có lỗi xảy ra","error"),tedu.stopLoading()}})}function o(t){$.ajax({type:"GET",url:"/Admin/Slide/GetById",data:{id:t},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(t){var e=t;$("#hidIdM").val(e.Id),$("#txtNameM").val(e.Name),$("#txtGroupAliasM").val(e.GroupAlias),$("#txtDisplayOrderM").val(e.DisplayOrder),$("#txtUrlM").val(e.Url),$("#txtDescM").val(e.Description),$("#txtImageM").val(e.Image),$("#ckStatusM").prop("checked",e.Status===!0),$("#modal-add-edit").modal("show"),tedu.stopLoading()},error:function(){tedu.notify("Có lỗi xảy ra","error"),tedu.stopLoading()}})}function i(t,e,n){var a=Math.ceil(t/tedu.configs.pageSize);0!==$("#paginationUL a").length&&n!==!0||($("#paginationUL").empty(),$("#paginationUL").removeData("twbs-pagination"),$("#paginationUL").unbind("page")),$("#paginationUL").twbsPagination({totalPages:a,visiblePages:7,first:"Đầu",prev:"Trước",next:"Tiếp",last:"Cuối",onPageClick:function(t,n){tedu.configs.pageIndex=n,setTimeout(e(),200)}})}this.initialize=function(){n(),t()}},UserController=function(){function t(){$("#frmMaintainance").validate({errorClass:"red",ignore:[],lang:"vi",rules:{txtFullName:{required:!0},txtUserName:{required:!0},txtPassword:{required:!0,minlength:6},txtConfirmPassword:{equalTo:"#txtPassword"},txtEmail:{required:!0,email:!0}}}),$("#txt-search-keyword").keypress(function(t){13===t.which&&(t.preventDefault(),o())}),$("#btn-search").on("click",function(){o()}),$("#ddl-show-page").on("change",function(){tedu.configs.pageSize=$(this).val(),tedu.configs.pageIndex=1,o(!0)}),$("#btn-create").on("click",function(){n(),a(),$("#modal-add-edit").modal("show")}),$("body").on("click",".btn-edit",function(t){t.preventDefault();var n=$(this).data("id");$.ajax({type:"GET",url:"/Admin/User/GetById",data:{id:n},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(t){var n=t;$("#hidId").val(n.Id),$("#txtFullName").val(n.FullName),$("#txtUserName").val(n.UserName),$("#txtEmail").val(n.Email),$("#txtPhoneNumber").val(n.PhoneNumber),$("#ckStatus").prop("checked",1===n.Status),a(n.Roles),e(!0),$("#modal-add-edit").modal("show"),tedu.stopLoading()},error:function(){tedu.notify("Có lỗi xảy ra","error"),tedu.stopLoading()}})}),$("#btnSave").on("click",function(t){if($("#frmMaintainance").valid()){t.preventDefault();var e=$("#hidId").val(),a=$("#txtFullName").val(),i=$("#txtUserName").val(),r=$("#txtPassword").val(),d=$("#txtEmail").val(),c=$("#txtPhoneNumber").val(),l=[];$.each($('input[name="ckRoles"]'),function(t,e){$(e).prop("checked")===!0&&l.push($(e).prop("value"))});var s=$("#ckStatus").prop("checked")===!0?1:0;$.ajax({type:"POST",url:"/Admin/User/SaveEntity",data:{Id:e,FullName:a,UserName:i,Password:r,Email:d,PhoneNumber:c,Status:s,Roles:l},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Cập nhật sản phẩm thành công","success"),$("#modal-add-edit").modal("hide"),n(),tedu.stopLoading(),o(!0)},error:function(){tedu.notify("Cập nhật sản phẩm có lỗi xảy ra","error"),tedu.stopLoading()}})}return!1}),$("body").on("click",".btn-delete",function(t){t.preventDefault();var e=$(this).data("id");tedu.confirm("Bạn có chắc chắn muốn xoá?",function(){$.ajax({type:"POST",url:"/Admin/User/Delete",data:{id:e},beforeSend:function(){tedu.startLoading()},success:function(){tedu.notify("Xoá thành công","success"),tedu.stopLoading(),o()},error:function(){tedu.notify("Xoá không thành công","error"),tedu.stopLoading()}})})})}function e(t){$("#txtUserName").prop("disabled",t),$("#txtPassword").prop("disabled",t),$("#txtConfirmPassword").prop("disabled",t)}function n(){e(!1),$("#hidId").val(""),a(),$("#txtFullName").val(""),$("#txtUserName").val(""),$("#txtPassword").val(""),$("#txtConfirmPassword").val(""),$('input[name="ckRoles"]').removeAttr("checked"),$("#txtEmail").val(""),$("#txtPhoneNumber").val(""),$("#ckStatus").prop("checked",!0)}function a(t){$.ajax({url:"/Admin/Role/GetAll",type:"GET",dataType:"json",async:!1,success:function(e){var n=$("#role-template").html(),a=e,o="";$.each(a,function(e,a){var i="";void 0!==t&&t.indexOf(a.Name)!==-1&&(i="checked"),o+=Mustache.render(n,{Name:a.Name,Description:a.Description,Checked:i})}),$("#list-roles").html(o)}})}function o(t){$.ajax({type:"GET",url:"/admin/user/GetAllPaging",data:{categoryId:$("#ddl-category-search").val(),keyword:$("#txt-search-keyword").val(),page:tedu.configs.pageIndex,pageSize:tedu.configs.pageSize},dataType:"json",beforeSend:function(){tedu.startLoading()},success:function(e){var n=$("#table-template").html(),a="";e.RowCount>0?($.each(e.Results,function(t,e){a+=Mustache.render(n,{FullName:e.FullName,Id:e.Id,UserName:e.UserName,Avatar:void 0===e.Avatar?'<img src="/admin-side/images/user.png" width=25 />':'<img src="'+e.Avatar+'" width=25 />',DateCreated:tedu.dateTimeFormatJson(e.DateCreated),Status:tedu.getStatus(e.Status)})}),$("#lbl-total-records").text(e.RowCount),void 0!==a&&$("#tbl-content").html(a),i(e.RowCount,function(){o()},t)):$("#tbl-content").html(""),tedu.stopLoading()},error:function(t){console.log(t)}})}function i(t,e,n){var a=Math.ceil(t/tedu.configs.pageSize);0!==$("#paginationUL a").length&&n!==!0||($("#paginationUL").empty(),$("#paginationUL").removeData("twbs-pagination"),$("#paginationUL").unbind("page")),$("#paginationUL").twbsPagination({totalPages:a,visiblePages:7,first:"Đầu",prev:"Trước",next:"Tiếp",last:"Cuối",onPageClick:function(t,n){tedu.configs.pageIndex=n,setTimeout(e(),200)}})}this.initialize=function(){o(),t()}};